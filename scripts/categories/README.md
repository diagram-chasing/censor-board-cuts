# censor-board-cuts categories script

The categories pipeline fetches film categories from the Central Board of Film Certification (CBFC) India website.

## Usage

To run the categories pipeline with default settings:
```bash
python main.py
```

### Options

- **Skip data fetching** (useful when you already have raw data):
  ```bash
  python main.py --skip-fetch
  ```

- **Specify characters** to search for:
  ```bash
  python main.py --characters A,B,C   # List format
  python main.py --characters A-M     # Range format
  python main.py --characters A       # Single character
  ```

## Pipeline Workflow

The pipeline consists of four main steps:

1. **Fetch Data** (`fetch.py`):
   - Downloads film listings from CBFC website using character search
   - Solves CAPTCHAs automatically using Tesseract OCR
   - Saves raw HTML files for each search listing
   - Uses date tracking to only fetch new data since last run

2. **Parse HTML** (`parse.py`):
   - Extracts basic film information from the HTML files
   - Removes duplicates and creates a consolidated CSV with film names, years, and URLs

3. **Fetch Categories** (`categories.py`):
   - Downloads detailed film information pages for each film
   - Uses the film URLs from the previous step
   - Saves individual HTML files for each film record

4. **Extract Data** (`extract.py`):
   - Processes the individual film HTML files
   - Extracts structured data including certificate details, film metadata, etc.
   - Creates a comprehensive CSV dataset of all film information

## Output Files

- `pipeline.log`: Detailed execution log
- `raw/`: Directory containing raw HTML files
- `raw/categories/`: Directory containing individual film HTML files
- `../../data/raw/recent.csv`: List of films with their URLs
- `../../data/raw/categories.csv`: Final structured dataset with all film information

## Notes

- The pipeline uses a `.last-fetched-date` file to track and fetch only new data
- Includes randomized delays between requests to avoid triggering anti-scraping measures
- CAPTCHA recognition may require multiple retry attempts

## Legal Disclaimer

This script is intended for educational and personal use only. Ensure that you comply with CBFC's terms of service and robots.txt policies before running automated scripts on their website.

## AI Disclaimer

This code was mostly generated by Claude, using Cursor.
